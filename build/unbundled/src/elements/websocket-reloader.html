<html><head><link rel="import" href="../../bower_components/polymer/polymer.html"></head><body><dom-module id="websocket-reloader"><script>Polymer({is:'websocket-reloader',properties:{connectedOnce:!1},ready:function(){this._reconnect()},_reconnect:function(){var a=new WebSocket('ws://'+window.location.hostname+':'+window.location.port+'/reload');a.onopen=this._connected.bind(this),a.onclose=this._disconnected.bind(this),a.onmessage=this._onmessage.bind(this)},_onmessage:function(a){location.pathname.endsWith('/'+a.data)&&location.reload()},_connected:function(){this.connectedOnce=!0},_disconnected:function(){this.connectedOnce&&(console.log('Refresh socket disconnected'),setTimeout(()=>this._reconnect(),2e3))}});</script></dom-module></body></html>